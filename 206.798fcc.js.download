(window.webpackJsonp=window.webpackJsonp||[]).push([[206],{"31c2":function(e,t,o){"use strict";o.r(t);o("pNMO"),o("ma9I"),o("TeQF"),o("QWBl"),o("yq1k"),o("yXV3"),o("oVuX"),o("2B1R"),o("+2oP"),o("5DmW"),o("27RR"),o("tkto"),o("JTJg"),o("FZtP");var a=o("L2JU"),i=(o("fbCW"),o("qePV"),o("zKZe"),gbCommonInfo.LAZY_IMG),s={name:"StyleGallerySlider",props:{daEventClick:{type:String,default:""},uniqueName:{type:String,default:""},goodsArr:{type:Array,default:function(){return{}}},isNormal:{type:Boolean,default:!0},isGetlook:{type:Boolean,default:!1},isOtheroptions:{type:Boolean,default:!1},isBottominfo:{type:Boolean,default:!1},autoplay:{type:Number,default:0},slidesPerGroup:{type:Number,default:5},goodsSn:{type:String,default:""}},data:function(){return{LAZY_IMG:i,nextDisable:!1,prevDisable:!1}},computed:{slideItemClass:function(){return{"common-swiperv2__slide-normal":this.isNormal,"common-swiperv2__slide-getlook":this.isGetlook,"common-swiperv2__other-options":this.isOtheroptions}}},watch:{goodsSn:function(){var e=this;this.$nextTick((function(){$(e.$el).find("img").removeAttr("data-was-processed").attr("src",e.LAZY_IMG),"undefined"!=typeof GB_SHEIN_lazyLoadInstance&&GB_SHEIN_lazyLoadInstance.update()}))},goodsArr:function(){var e=this;this.$nextTick((function(){$(e.$el).find("img").removeAttr("data-was-processed").attr("src",e.LAZY_IMG),"undefined"!=typeof GB_SHEIN_lazyLoadInstance&&GB_SHEIN_lazyLoadInstance.update()}))}},mounted:function(){var e=this,t=this;Vue.nextTick((function(){var o={observer:!0,observeParents:!0,slidesPerView:"auto",slidesPerGroup:e.slidesPerGroup,spaceBetween:10,onInit:function(e){var o=e.realIndex;e.isEnd&&(t.nextDisable=!0),0==o&&(t.prevDisable=!0)},onSlideNextStart:function(e){t.slidePage=Math.ceil(e.realIndex/t.slidesPerGroup),t.slidePage=t.slidePage+1,t.goodsArr.length-t.slidePage*t.slidesPerGroup<2*t.slidesPerGroup+1&&t.$emit("nextDataLoad"),t.handleDisable()},onSlidePrevStart:function(){t.handleDisable()}};e.autoplay&&(o.autoplay=e.autoplay,o.speed=1e3,o.autoplayDisableOnInteraction=!1),e.swiper=new Swiper(e.$refs["common-swiperv2"],Object.assign({},o,{onSlideChangeEnd:function(t){var a=t.activeIndex/o.slidesPerGroup;e.goodsArr.forEach((function(e,t){e.slideIndex=t})),e.$emit("slide",{swiper:t,index:a,goods:e.goodsArr,uniqueName:e.uniqueName})}})),e.$nextTick((function(){$(e.$el).find("img").removeAttr("data-was-processed").attr("src",e.LAZY_IMG),"undefined"!=typeof GB_SHEIN_lazyLoadInstance&&GB_SHEIN_lazyLoadInstance.update()}))}))},methods:{tapItem:function(e,t,o){this.$emit("tapItem",Object.assign({},e,{slideIndex:t}),o.target)},slideRight:function(){this.swiper.slideNext(),this.handleDisable()},slideLeft:function(){this.swiper.slidePrev(),this.handleDisable()},handleDisable:function(){var e=Math.floor(this.swiper.realIndex/this.slidesPerGroup);this.prevDisable=0==e,this.swiper.isEnd?this.nextDisable=!0:this.nextDisable=!1},transformImg:transformImg}},n=o("KHd+"),r=Object(n.a)(s,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"common-slider"},[o("div",{ref:"common-swiperv2",class:["swiper-container","common-swiperv2",e.isBottominfo?"common-swiperv2_btm":""]},[o("div",{ref:"common-swiperv2__prev",staticClass:"common-swiperv2__prev",class:{"swiper-button-disabled":e.prevDisable},on:{click:e.slideLeft}},[o("i",{staticClass:"iconfont icon-arrownew-right"})]),e._v(" "),o("div",{staticClass:"swiper-wrapper"},e._l(e.goodsArr,(function(t,a){return o("div",{key:a,class:["swiper-slide",e.slideItemClass],attrs:{"da-event-click":e.daEventClick,"data-scici":t.scici,"data-goods_id":t.goods_id,"data-spu":t.productRelationID||t.goods_sn,"data-us-price":t.salePrice&&t.salePrice.usdAmount,"data-us-origin-price":t.retailPrice&&t.retailPrice.usdAmount,"data-cat_id":t.cat_id,"data-sku":t.goods_sn,"data-position-index":a+1},on:{click:function(o){e.tapItem(t,a,o)}}},[o("a",{staticClass:"common-swiperv2__slide-img position-img",attrs:{href:"javascript:;"}},[o("img",{staticClass:"j-verlok-lazy",attrs:{src:e.LAZY_IMG,"data-src":e.transformImg(t.slideImg)}})]),e._v(" "),e.isBottominfo?[o("div",{staticClass:"common-swiperv2__btm"},[o("div",{class:[t.salePrice.amountWithSymbol!==t.retailPrice.amountWithSymbol?"sale":"ori"]},[e._v("\n              "+e._s(t.salePrice.amountWithSymbol)+"\n            ")]),e._v(" "),t.salePrice.amountWithSymbol!==t.retailPrice.amountWithSymbol?o("div",{staticClass:"del"},[o("del",[e._v(e._s(t.retailPrice.amountWithSymbol))])]):e._e()])]:e._e()],2)}))),e._v(" "),o("div",{ref:"common-swiperv2__next",staticClass:"common-swiperv2__next",class:{"swiper-button-disabled":e.nextDisable},on:{click:e.slideRight}},[o("i",{staticClass:"iconfont icon-arrownew-left"})])])])}),[],!1,null,null,null).exports,l=o("prKo"),d=o("XKCe");o("j8FZ");function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}d.a.addSubscriber({modulecode:"1-8-3"});var m=gbCommonInfo.IS_RW,g={name:"StyleGallery",components:{StyleGallerySlider:r,CommonImageModal:l.a},data:function(){return{IS_RW:m,imageModal:{show:!1,index:0},lang:window.lang,lookbookInfo:{data:[],noData:!1,page:1,total:0},goods_ids:[],goods_sn:"",modalPadding:0}},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){u(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},Object(a.e)(["productIntroData"]),{},Object(a.c)(["language"]),{imgData:function(){var e=this,t=[];return this.lookbookInfo.data.forEach((function(o){o.upload_img.middle.forEach((function(o){t.push({slideImg:e.transformImg(o)})}))})),t.map((function(e,t){return e.slideIndex=t,e}))},modalCss:function(){return{padding:"".concat(this.modalPadding,"px 0")}}}),watch:{productIntroData:{handler:function(e){this.productIntroData&&(this.goods_sn=e.detail.goods_sn,this.lookbookInfo.data=[],this.lookbookInfo.noData=!1,this.lookbookInfo.page=1,this.lookbookInfo.total=0,this.getData())},immediate:!0}},mounted:function(){var e=this;this.modalPadding=.1*document.body.clientHeight,$(window).resize((function(){e.modalPadding=.1*document.body.clientHeight}))},methods:{getData:function(){var e=this;if(!this.lookbookInfo.noData){var t,o,a=this.productIntroData,i=this.goods_ids;i.length&&i.includes(this.goodsId)||(i=[a.detail.goods_id].concat(a.relation_color.slice(0).map((function(e){return e.goods_id})))),o=i.length>5?5:i.length;var s=i.indexOf(a.goods_id);(t=i.slice(s,s+o)).length<o&&(t=t.concat(i.slice(0,o-t.length)));var n=i.length>5?t:i;$.get("/goods_detail/styleGallery",{lookbookIds:n.join(","),page:this.lookbookInfo.page++}).then((function(t){"0"===t.code&&(e.lookbookInfo.data=e.lookbookInfo.data.concat(t.info.data),e.lookbookInfo.total=t.info.total)}))}},showImageModal:function(e){var t=this;Vue.nextTick((function(){t.imageModal.index=e,t.imageModal.show=!0}))},tapProduct:function(e){d.a.triggerNotice({daId:"1-8-3-1",extraData:{imag_url:e.slideImg,pic_num:e.slideIndex+1}}),this.showImageModal(e.slideIndex)},transformImg:window.transformImg,slide:function(e){this.imgData.length-e.swiper.realIndex<3&&this.getData()},slideNext:function(){d.a.triggerNotice({daId:"1-8-3-3"})},slidePrev:function(){d.a.triggerNotice({daId:"1-8-3-4"})}}},p=Object(n.a)(g,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.lookbookInfo.total>0?o("div",{staticClass:"j-expose__style-gallery-container"},[o("div",{staticClass:"j-expose__style-gallery-content"},[o("div",{staticClass:"j-expose__style-gallery-target",attrs:{"data-num":e.lookbookInfo.total}},[o("div",{staticClass:"stylegallery-box"},[o("div",{staticClass:"stylegallery-box__title"},[o("strong",[e._v(e._s(e.IS_RW?e.language.SHEIN_PC_KEY_5063:e.language.lang_goods_style_gallery)+" ("+e._s(e.lookbookInfo.total)+")")])]),e._v(" "),o("style-gallery-slider",{attrs:{"goods-arr":e.imgData,"goods-sn":e.goods_sn},on:{nextDataLoad:e.getData,tapItem:e.tapProduct}}),e._v(" "),o("CommonImageModal",{attrs:{"image-data":e.imgData,"image-show":e.imageModal.show,"current-index":e.imageModal.index,"is-stylegallery":!0,"is-new-stylegallery":!0,"style-css":e.modalCss},on:{close:function(t){e.imageModal.show=!1},slide:e.slide,slidePrev:e.slidePrev,slideNext:e.slideNext}})],1)])])]):e._e()}),[],!1,null,null,null);t.default=p.exports}}]);
//# sourceMappingURL=206.798fcc.js.map