!function(){function e(){var e=document.createElement("script");e.setAttribute("src","//widget.fitanalytics.com/widget_zepto.js"),e.setAttribute("type","text/javascript"),document.body.appendChild(e),t.initialize(),window._fitAnalytics=window._upcload=function(){},window._fitAnalytics.shop=t}if(!window._fitAnalytics){var t={prefix:"shein-",products:{},isMobile:/iphone|android|iemobile|blackberry/i.test(window.navigator.userAgent)&&"ontouchstart"in window,el:{productContainer:".goods-detailv2__media-inner",sizes:".product-intro__size .product-intro__size-radio .inner",addToCart:".product-intro__add .product-intro__add-btn button",thumbnail:".product-intro__main .swiper-slide-active img",productId:".product-intro__head-sku",buttonAnchor:".product-intro__size-guide",sizeChart:".product-intro__size-guide"},useBackupSize:!1,hideSizeChart:!1,blockedLocales:[],PSEnabledCountries:["US","DE","GB"],justLoaded:!0,initialize:function(){var e=setInterval(function(){t.isLoaded()&&(clearInterval(e),t.onLoaded())},100)},isLoaded:function(){return"function"==typeof window.FitAnalyticsWidget&&"page_goods_detail"===o(window,"getSaPageInfo.page_name")},isBlockedLocale:function(){var e=[t.getLanguage(),t.getCountry()].join("_");return t.blockedLocales.indexOf(e)>-1},onLoaded:function(){t.$=FitAnalyticsWidget.jQuery,t._=FitAnalyticsWidget._,t.isDataAvailable()&&!t.isBlockedLocale()&&t.onPageLoaded()},isDataAvailable:function(){return!!t.getCurrentSerial()},find:function(e){return t.getContainer().find(e)},getContainer:function(){return t.$(t.el.productContainer)},getCurrentRawSerial:function(){var e=t.find(t.el.productId).text(),n=e&&e.match(/SKU: (.+)/)||[];return n.length?n.pop():""},getCurrentSerial:function(){var e=t.getCurrentRawSerial();return e&&t.prefix+e},getGarmentRegion:function(){return o(t.widget,"data.garment.region","")},getSizes:function(){var e=[];return e.dic={},e.state={},e.displaySizes={},t.find(t.el.sizes).toArray().forEach(function(n,o){var r=t.$(n),a=i(r.text()),u=i(t.$(t.isMobile?".local-size":".product-intro__size-title .country").first().text()),c=!r.parent().hasClass("product-intro__size-radio_disabled"),d=a?a.replace(/\t|\s/g,"").replace("("," ("):"",s=d?d.replace("(",u+" ").replace(")",""):"";if(e.displaySizes[o]=s,d=t.useBackupSize?s:i(d.replace(/\(.+\)/g,""))){var l=d.replace(/\s.*/,"");e.state[l]=c,c&&(e.push(l),e.dic[l]=r.parent())}}),e},getRootDomain:function(e){var t=/[a-z\.]+shein\.[a-z\.]+$/.exec(e);return null!=t?t[0]:null},getLanguage:function(){var e=(t.isMobile?t.$("body").attr("app-language"):t.$("meta[data-app-language]").data("app-language"))||$("body").attr("lang");if("vn"===e)return"vi";if("pt-br"===e||"br"===e)return"pt";var n="eur"===e?"EU":e.length>2?e.match(/(.{2})$/)[1]:e;return"eur"===e?"en":n||""},getCountry:function(){var e=window.location.pathname.replace(/\//g,""),t=o(window,"gbCommonInfo.lang","");if("ar"===e)return"SHEIN_AR";if("eur"===e)return"SHEIN_EU";if("asia"===t)return"SHEIN_ASIA";switch(window.location.hostname){case"ar.shein.com":return"SHEIN_AR";case"fr.shein.com":return"FR";case"es.shein.com":return"ES";case"de.shein.com":return"DE";case"it.shein.com":return"IT";case"ru.shein.com":return"RU";case"us.shein.com":return"US";case"eur.shein.com":return"SHEIN_EU";case"www.shein.com":return"SHEIN_INT";case"www.shein.co.uk":return"GB";case"asia.shein.com":return"SHEIN_ASIA";default:return function(){var e=window.gbCommonInfo&&window.gbCommonInfo.lang&&window.gbCommonInfo.lang.toUpperCase().substr(0,2)||"";switch(e){case"EN":return"SHEIN_INT";case"AR":return"SHEIN_AR";case"UK":return"GB";case"WW":return"SHEIN_WWW";case"EU":return"SHEIN_EU";default:return e}}()}},getThumbnail:function(){return t.find(t.el.thumbnail).first().attr("src")},getUserId:function(){return window.analysisUserId||""},getSizeChart:function(){return t.find(t.el.sizeChart)},getContext:function(e){return t.products[e]},setContext:function(e,n){return t.products[e]=t._.extend({},t.products[e],n)},onPageLoaded:function(){t.loadWidget(),t.requestProducts(t.getCurrentSerial()),t.getSizeChart().on("click.fita",function(){t.widget.meterClick("sizeChart",{garmentId:t.getCurrentSerial()})})},getWidgetLanguage:function(){return["HK","TW","VN","TH","AE","IL"].indexOf(t.getCountry())>-1?"en":t.getLanguage()},isProductSuggestionsEnabled:function(){return t.PSEnabledCountries.indexOf(t.getCountry())>-1},loadWidget:function(){t.widget=new window.FitAnalyticsWidget({language:t.getWidgetLanguage(),shopCountry:t.getCountry(),userId:t.getUserId(),localCookieDomain:t.getRootDomain(window.location.hostname),shopConfig:{showProductSuggestions:t.isProductSuggestionsEnabled()},recommend:function(e,n,i){t.recommend(e,n,i)},cart:function(e,i,o){t.recommend(e,i,o),n(t.getSizes().dic[i]),n(t.find(t.el.addToCart))},close:function(e,n,i){$("#branch-banner-iframe").show(),$(".c-header").show(),t.sendGAEvent("CloseCheckMySize"),1===i.userInfoLevel?t.recommend(e,0,i):t.recommend(e,n,i),t.button.find().focus()},open:function(){$(".uclw_widget_open .list-header-fixed").css("-webkit-transform","translate3d(0,0,0)"),t.isMobile&&($("#branch-banner-iframe").hide(),$(".c-header").hide()),Object.keys(t.products).forEach(function(e){(t.products[e]||{}).recommendation=null})}})},requestProducts:function(e){t.setContext(e,{isSupported:!1}),t.widget.requestProducts([e],function(e){if(e.length){var n=e.pop();t.setContext(n.garment.serial,{isSupported:!0})}t.checkForProductChange()})},recommend:function(e,n,i){t.useBackupSize||"xx"===t.getGarmentRegion()?(t.addRecommendationToContext(e,n,i),t.button.setText(n,i)):(t.useBackupSize=!0,t.getRecommendation())},addRecommendationToContext:function(e,n,i){t.setContext(e,{recommendation:{size:n,details:i}})},checkForProductChange:function(){!function(){var e,n=setInterval(function(){var i=t.getCurrentSerial(),o=e;if(e!==i){e=i;var r=t.products[e];t.previous=o,r?r&&t.onProductChange(e):(clearInterval(n),t.requestProducts(e))}},200)}()},onProductChange:function(e){t.widget.reconfigure({productId:e},t.onProductLoaded,t.onProductError)},onProductLoaded:function(){var e=t.previous,n=t.products[e]&&t.products[e].recommendation&&t.products[e].recommendation.size||"";e&&n.length&&t.sendGAEvent("Load-SizeRecommd",1,1),t.widget.meterProductVisit(t.getCurrentSerial(),!0),t.installButton()},onProductError:function(){t.widget.meterProductVisit(t.getCurrentSerial(),!1),t.button.hide(),t.getSizeChart().show()},installButton:function(){t.button.install();var e=t.getContext(t.getCurrentSerial());e.recommendation?t.button.setText(e.recommendation.size,e.recommendation.details):(e.recommendation=!0,t.getRecommendation()),t.hideSizeChart&&t.getSizeChart().hide(),t.button.show()},getRecommendation:function(){t.widget.getRecommendation({productId:t.getCurrentSerial(),thumb:t.getThumbnail(),manufacturedSizes:t.getSizes().state})},sendGAEvent:function(e,n,i){var o=t.isMobile?"mshein.send":"shein.send",r=t.getCurrentRawSerial(),a="SizeRecommended"===e?n+"&from edit&"+r:r+"&1&"+n;"SizeRecommended"===e||"Load-SizeRecommd"===e?ga(o,{hitType:"event",eventCategory:"商品详情页",eventAction:e,eventLabel:a,eventValue:i}):ga(o,"event","商品详情页",e)},button:{elementId:"fitanalytics__button",text:{de:["Meine Größe überprüfen","Deine Größe ist"],en:["Check My Size","Your Size Is"],fr:["Trouver Ma Taille","Votre Taille Est"],ru:["Найдите свой размер","Ваш размер"],sv:["Hitta Din Storlek","Din Storlek Är"],es:["Encuentra Tu Talla","Tu Talla Es"],it:["Trova La Tua Taglia","La Tua Taglia è"],nl:["Vind Jouw Maat","Jouw Maat Is"],pt:["Encontrar Seu Tamanho","Seu Tamanho é"],tr:["Size Uyan Bedeni Bulun","Sizin Bedeniniz"],tw:["查看我的尺碼","您的尺碼是："],hk:["查看我的尺碼","您的尺碼是："],vi:["Kiểm Tra Kích Thước Của Tôi","Kích thước của bạn là:"],th:["ไซส์แนะนำ:","ไซส์ของคุณ:"],ar:["مقاسك هو","ما هو مقاسي؟"].reverse(),he:["המידה שלך היא","מה המידה שלי?"].reverse()},getText:function(e,n){var i=!("string"!=typeof e||!t.getSizes().state[e]||n.outOfStock||n.outOfRange),o=this.text[t.getLanguage()]||this.text.en,r=t.getSizes().displaySizes[Object.keys(t.getSizes().state).indexOf(e)];return r&&(e=r),e&&n?t.justLoaded?(t.justLoaded=!1,i?(t.sendGAEvent("Load-SizeRecommd",e,1),t.sendGAEvent("SizeRecommended",e,1),o[1]+" <b>"+e+"</b>"):"new user"===e||i?"new user"===e?(t.sendGAEvent("Load-SizeRecommd",0,0),o[0]):void 0:(t.sendGAEvent("Load-SizeRecommd",0,0),t.sendGAEvent("SizeRecommended",e,0),o[0])):i?(t.sendGAEvent("SizeRecommended",e,1),o[1]+" <b>"+e+"</b>"):n.outOfStock?(t.sendGAEvent("SizeRecommended",e,0),o[0]):o[0]:o[0]},setText:function(e,t){this.find().find(".fitanalytics__button-text").html(this.getText(e,t)),this.find().attr("aria-label",this.getText(e,t))},buildButton:function(){var e=this.getText();return t.$("<a></a>").attr({id:this.elementId}).css({cursor:"auto",width:"auto","margin-left":t.isMobile?"10px":"0px",bottom:t.isMobile?"40px":"0px"}).append(t.$("<span></span>").attr({class:"fitanalytics__button-text"}).css({display:"inline-block","font-size":t.isMobile?"13px":"12px",cursor:"pointer",color:t.isMobile?"#666":"#003569"}).on("click",this.onClick).text(e)).append('<style type="text/css">\n#fitanalytics__button:focus {outline: 1px black dotted !important;outline-offset: 2px}\n</style>')},isInitialized:!1,show:function(){this.find().show()},hide:function(){this.find().hide()},find:function(){return t.find("#"+this.elementId)},onClick:function(){return t.sendGAEvent("ClickCheckMySize"),t.widget.meterClick("sizeAdvisor",{garmentId:t.getCurrentSerial()}),t.widget.open({productId:t.getCurrentSerial(),thumb:t.getThumbnail(),manufacturedSizes:t.getSizes().state}),!1},onKeyboardPress:function(e){e.preventDefault();var n=e.which;13!==n&&32!==n||t.button.onClick()},install:function(){if(!this.find().length){var e=this.buildButton();t.find(t.el.buttonAnchor).after(e)}}}},n=function(e){return!(!e||!t.$)&&(e instanceof t.$||t.$.zepto&&t.$.zepto.isZ(e)||(e=t.$(e)),"function"==typeof e.prop&&"OPTION"===e.prop("tagName")?e.parent().val(e.val()).change():t.isMobile&&"function"==typeof e.tap?e.tap():"function"==typeof e.click&&e.click(),e)},i=function(e){return"string"!=typeof e?"":e.replace(/^["'\s\uFEFF\xA0]+|[\s\uFEFF\xA0"']+$/g,"")},o=function(e,t,n){e=e&&e instanceof Object?e:{},null==n&&(n=null),"."===t&&(t="");for(var i="[object Array]"===Object.prototype.toString.apply(t)?t:t.split("."),o=0,r=i.length;o<r;o++){var a=e[i[o]];if(null==a)return n;e=a}return a};"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",function(){e()})}}();
//# sourceMappingURL=pdp.js.map